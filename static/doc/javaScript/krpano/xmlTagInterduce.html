<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="/static/threeComponent/highlight/styles/atom-one-light.css">

    <link rel="stylesheet" href="/static/threeComponent/md/han.css">
    <!-- <link rel="stylesheet" href="/static/threeComponent/md/common.css"> -->

    <script src="/static/threeComponent/highlight/highlight.pack.js"></script>
    <script src="/static/threeComponent/jquery-3.2.1.min.js"></script>
</head>

<body>
    <div class="page-container">
        <div class="left-area">
            <div class="vertical-menu" id="verticalMenu">

            </div>
        </div>
        <div class="right-area">
            <div class="md-content-null-right" id="mdContent">
<h1 id="标签介绍">标签介绍</h1>
<h2 id="preview标签">preview标签</h2>
<p>定义一个当全景图片还未加载完毕时的一个小的预览图片。这个预览图片一定要小（文件小，分辨率小），以更快的加载出来。</p>
<table>
<thead>
<tr>
<th align="left">属性名</th>
<th align="left">属性全名</th>
<th align="left">类型</th>
<th align="left">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">url</td>
<td align="left">preview.url</td>
<td align="left">String</td>
<td align="left"></td>
</tr>
</tbody></table>
<h2 id="view标签">view标签</h2>
<p>view标签包含了当前视图的相关信息。
在xml中，它可以用来设置启动视图的配置。
观看方向将通过hlookat和vlookat属性来配置，以及fov的设置。</p>
<pre><code class="language-xml">    &lt;view
        hlookat=&quot;0.0&quot;
        vlookat=&quot;0.0&quot;
        fov=&quot;90.0&quot;
        fovmin=&quot;1.0&quot;
        fovmax=&quot;179.0&quot;
        maxpixelzoom=&quot;&quot;
    /&gt;</code></pre>
<table border=1>
<tr>
    <th>属性名</th>
    <th>属性全名</th>
    <th>类型</th>
    <th>默认值</th>
</tr>
<tr>
    <td>hlookat</td>
    <td>view.hlookat</td>
    <td>Number</td>
    <td>0.0</td>
</tr>
<tr>
    <td colspan=4>
    球面坐标的水平方向。典型的范围从-180到180.view本身不会值不会环绕360.值0.0只想pano图像的中心
    </td>
</tr>

<tr>
    <td>vlookat</td>
    <td>view.vlookat</td>
    <td>Number</td>
    <td>0.0</td>
</tr>
<tr>
    <td colspan=4>
    球面坐标的垂直方向。典型的范围从-90到90.
    </td>
</tr>

<tr>
    <td>fov</td>
    <td>view.fov</td>
    <td>Number</td>
    <td>90.0</td>
</tr>
<tr>
    <td colspan=4>
    0.0-179.0
    </td>
</tr>

<tr>
    <td>fovmin</td>
    <td>view.fovmin</td>
    <td>Number</td>
    <td>1.0</td>
</tr>
<tr>
    <td colspan=4>
    最小的fov值，这将在pano中限制缩放
    </td>
</tr>

<tr>
    <td>fovmax</td>
    <td>view.fovmax</td>
    <td>Number</td>
    <td>179.0</td>
</tr>
<tr>
    <td colspan=4>
    最大的fov值，这将在pano外限制缩放
    </td>
</tr>
<tr>
    <td>maxpixelzoom</td>
    <td>view.maxpixelzoom</td>
    <td>Number</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    pano图像的最大像素放大因子。这将根据pano的分辨率和当前的查看窗口（比如，1.0 = 限制为100%缩放）来限制fov，而源图像的像素缩放将不可见。
    </td>
</tr>

<tr>
    <td>mfovratio</td>
    <td>view.mfovratio</td>
    <td>Number</td>
    <td>1.333333</td>
</tr>
<tr>
    <td colspan=4>
    当使用fovtype=MFOV设置时，最大屏幕尺寸计算的大小比例。默认情况下，将使用4:3屏幕（4/3 = 1.3333）的比例
    </td>
</tr>
<tr>
    <td>distortion（旧版：fisheye）</td>
    <td>view.distortion(旧版：view.fisheye)</td>
    <td>Number</td>
    <td>0.0</td>
</tr>
<tr>
    <td colspan=4>
    鱼眼畸变效应（0.0-1.0）.该值是在正常直线图像和扭曲的鱼眼视图之间的插值
    0.0 = 无失真/直线性
    1.0 = 完全失真
    有两种鱼眼模式：正常（view.stereographic="flase"） 球面(view.stereographic="true")
    </td>
</tr>
</table>

<h2 id="action-标签">action 标签</h2>
<p>使用action标签，可以定义krpano操作。</p>
<p>这些操作与其他脚本或编程语言编程中的函数或过程类似。</p>
<p>可以从各个地方调用这些操作——从事件，从其他action，也可以从外部源（javaScript，插件）调用接口。</p>
<p>这里有两种action类型：</p>
<ul>
<li>normal krpano action -flash和html5</li>
<li>javaScript krpano action -仅html5</li>
</ul>
<h3 id="normal-krpano-action">Normal krpano action</h3>
<pre><code class="language-xml">
&lt;action name=&quot;...&quot; scope=&quot;...&quot; args=&quot;&quot;&gt;
    action1();
    action2();
&lt;/action&gt;
</code></pre>
<p>在普通的action标签中，可以放置krpano的action调用的序列。当调用该action时，这些action调用将一个接一个地执行。</p>
<p>这里是krpano中action的语法和调用约定：
<a href="./callActionAndFunctionConventions.html">krpano action/function 的调用约定</a></p>
<p>当调用action时，可能会传递一些参数。
对于访问arguments/parameters有两种可能：</p>
<ol>
<li>通过占位符替换：（老版方法）</li>
</ol>
<ul>
<li>为了在action的代码中获取给定的参数，可以使用%0-%99的表单的数字占位符。</li>
<li>%0 是action自身的name，%1 是第一个参数，%2是第二个参数，以此类推。</li>
<li>在代码中，这些占位符可以被用于任何地方，任何时候。</li>
<li>在解析和执行action代码之前，所有的占位符将被其参数值替换。</li>
<li>当给定的占位符没有参数时，将使用“null”值。</li>
<li>在action中使用%，必须使用%%。</li>
</ul>
<ol start="2">
<li>通过参数/变量映射（推荐的）</li>
</ol>
<ul>
<li>对于具有本地范围的操作，可以将args属性添加到action标签中。例如：
  &lt;action ... args=&quot;var1,var2,var3&quot;&gt;</li>
<li>在args属性变量中，可以定义给定action参数的变量名（通过逗号隔开）。</li>
<li>每个action参数将被映射到本地范围内的一个新变量，该变量的名称是在args属性中设置的。</li>
<li>这些变量可以正常的使用，就像action代码中定义的其他的变量一样。</li>
<li>当变量没有赋予值时，默认值为null</li>
<li>使用变量映射在处理包含引号或逗号字符的值时非常。在这种情况下，正常的placeholder替换可能是有问题的。</li>
</ul>
<h3 id="javascript-krpano-actions（html5-only）">javaScript krpano actions（html5 only）</h3>
<pre><code>&lt;action name=&#39;...&#39; type=&quot;Javascript&quot;&gt;
    &lt;![CDATA[
        ....
        javaScript code
        ....
    ]]&gt;
&lt;/action&gt;</code></pre><p>通过这种形式的action，可以直接使用javaScript代码来执行。这可能对于复杂的事情会处理的比较快。javaScript actions 尽在krpano HTML5 viewer中使用。</p>
<p>javaScript actions中预置了以下对象和方法：</p>
<ul>
<li><strong>krpano</strong>: krpano接口对象（get，set，call，trace，...）</li>
<li><strong>args[]</strong>: 传递的参数。类型为数组。</li>
<li><strong>caller</strong>： 调用action的调用者，一般是&lt;layer&gt;,&lt;plugin&gt;,&lt;hotspot&gt;。</li>
<li><strong>resolve(str)</strong>:一个用于解析/获取krpano变量/路径值的方法。它的工作方式类似于默认的krpano变量解析——当给定的变量/路径存在时，将返回值，而当没有返回时，传递的值将按原样返回。</li>
<li><strong>actions</strong>:访问内置的krpano action对象（例如：call actions.tween(...),这样调用了名为tween的action）。</li>
</ul>
<table border=1>
<tr>
    <th>属性名</th>
    <th>属性全名</th>
    <th>类型</th>
    <th>默认值</th>
</tr>
<tr>
    <td>name</td>
    <td>action[name].name</td>
    <td>string</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    action的名称。当没有设置name时，系统会自动生成一个name
    </td>
</tr>

<tr>
    <td>type</td>
    <td>actions[name].type</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    action 类型：<br>
    type=“” （默认） Normal krpano actions<br>
    type="Javascript" Javascript krpano actions
    </td>
</tr>

<tr>
    <td>scope</td>
    <td>action[name].scope</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    在action中，定义的scope会生成以下变量：<br>
    global：<br>
     新变量将会添加到全局作用域中。<br>
     其他action或者代码将可以使用这些变量。<br>
     当重新使用变量名时，这可能有问题，特使是当变量类型在function之间有所不同时。<br>
     local<br>
     新的变量仅存在于被调用的action作用域中。<br>
     当action完成或者调用其他action时，在本地作用域内定义的所有变量将不可用。<br>
    action越复杂，使用的临时变量越多，使用本地作用域来避免干扰其他action就显的越有意义。<br>
    localonly<br>
    和scope=local一样，但不同的是，所有访问仅在默认情况下仅引用本地范围本身。<br>
    只能通过全局对象访问全局作用域。<br>
    parent<br>
    从调用者那里使用作用域。<br>
    当调用当前action的action有一个局部作用域时，则此action也可以在当前action中使用访问。<br>
    private：Name<br>
    为action定义一个私有的作用域范围。<br>
    这个作用域将由一个自定义的唯一NAME来引用。<br>
    这个作用域在多个action调用之间保持活跃，并且可以在多个action之间共享。<br>
    scope=localonly 所有访问仅指范围本身。<br>
    未完成翻译
    </td>
</tr>

<tr>
    <td>args</td>
    <td>action[name].args</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    匹配action对象参数到本地变量。要求使用local scope 。
    </td>
</tr>
</table>

<h2 id="hotspot">hotspot</h2>
<p>hotspot是全景的一块区域，在鼠标悬停或者点击时发生反应。它们可以被用来加载其他的全景，链接到其他的url，改变view。</p>
<p>目前有两种类型的hotspot：</p>
<ul>
<li>polygonal hotspot（多边形热点）</li>
</ul>
<p>这些区域由一组点来定义的。</p>
<p><img src="./img/hotspotarea.jpg" alt=""></p>
<ul>
<li>Image Hotspot(图片热点)</li>
</ul>
<p>这些是图像或flash影片作为热点</p>
<p><img src="./img/hotspotimages.jpg" alt=""></p>
<p>热点的类型由其属性定义：</p>
<ul>
<li>如果设置了url属性，那么热点类型为image hotspot</li>
<li>如果没有定义url，并且定义了一些点，那么热点类型为多边形热点。</li>
</ul>
<pre><code class="language-xml">
&lt;hotspot name=&quot;...&quot;
         type=&quot;image&quot;
         url=&quot;...&quot;
         keep=&quot;false&quot;
         visible=&quot;true&quot;
         enabled=&quot;true&quot;
         handcursor=&quot;true&quot;
         maskchildren=&quot;false&quot;
         zorder=&quot;&quot;
         style=&quot;&quot;
         ath=&quot;0.0&quot; atv=&quot;0.0&quot;
         edge=&quot;center&quot;
         zoom=&quot;false&quot;
         distorted=&quot;false&quot; rx=&quot;0.0&quot; ry=&quot;0.0&quot; rz=&quot;0.0&quot;
         width=&quot;&quot; height=&quot;&quot;
         scale=&quot;1.0&quot;
         rotate=&quot;0.0&quot;
         alpha=&quot;1.0&quot;
         onover=&quot;&quot;
         onhover=&quot;&quot;
         onout=&quot;&quot;
         ondown=&quot;&quot;
         onup=&quot;&quot;
         onclick=&quot;&quot;
         onloaded=&quot;&quot;
         /&gt;

</code></pre>
<pre><code class="language-xml">
&lt;hotspot name=&quot;...&quot;
         keep=&quot;false&quot;
         visible=&quot;true&quot;
         enabled=&quot;true&quot;
         handcursor=&quot;true&quot;
         capture=&quot;true&quot;
         style=&quot;&quot;
         alpha=&quot;1.0&quot;
         fillcolor=&quot;0xAAAAAA&quot;
         fillalpha=&quot;0.5&quot;
         borderwidth=&quot;3.0&quot;
         bordercolor=&quot;0xAAAAAA&quot;
         borderalpha=&quot;1.0&quot;
         onover=&quot;&quot;
         onhover=&quot;&quot;
         onout=&quot;&quot;
         ondown=&quot;&quot;
         onup=&quot;&quot;
         onclick=&quot;&quot;
         onloaded=&quot;&quot;
&gt;
    &lt;point ath=&quot;...&quot; atv=&quot;...&quot; /&gt;
    &lt;point ath=&quot;...&quot; atv=&quot;...&quot; /&gt;
    &lt;point ath=&quot;...&quot; atv=&quot;...&quot; /&gt;
    ...
&lt;/hotspot&gt;
</code></pre>
<table border=1>
<tr>
    <th>属性名</th>
    <th>属性全名</th>
    <th>类型</th>
    <th>默认值</th>
</tr>
<tr>
    <td></td>
    <td>hotspot[name].name</td>
    <td>string</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当前热点的name值。
    </td>
</tr>

<tr>
    <td>type</td>
    <td>hotspot[name].type</td>
    <td>string</td>
    <td>imgae</td>
</tr>
<tr>
    <td colspan=4>
    hotspot的类型：<br>
    image：使用url属性后，默认为image<br>
    text ： 将文字作为热点。
    </td>
</tr>

<tr>
    <td>url</td>
    <td>hotspot[name].url</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    热点的图片路径。支持的文件类型有：JPG，PNG，GIF 和 SWF（flash）。注意，当url属性被设置后，那么热点类型就为图片热点，而不能是多边形热点。
    </td>
</tr>

<tr>
    <td>keep</td>
    <td>hotspot[name].keep</td>
    <td>Boolean</td>
    <td>false</td>
</tr>
<tr>
    <td colspan=4>
    当加载一个新pano后，是否保持这个热点
    </td>
</tr>

<tr>
    <td>visible</td>
    <td>hotspot[name].visible</td>
    <td>Boolean</td>
    <td>true</td>
</tr>
<tr>
    <td colspan=4>
    是否显示热点
    </td>
</tr>

<tr>
    <td>enabled</td>
    <td>hotspot[name].enabledvisible</td>
    <td>Boolean</td>
    <td>true</td>
</tr>
<tr>
    <td colspan=4>
    启用hotspot元素来接收鼠标事件。当设置为‘false’时，鼠标事件将被路由到底层元素。
    </td>
</tr>

<tr>
    <td>handcursor</td>
    <td>hotspot[name].handcursor</td>
    <td>Boolean</td>
    <td>true</td>
</tr>
<tr>
    <td colspan=4>
    当鼠标在hotspot元素上时，显示一个指针。
    </td>
</tr>

<tr>
    <td>maskchildren</td>
    <td>hotspot[name].maskchildren</td>
    <td>Boolean</td>
    <td>false</td>
</tr>
<tr>
    <td colspan=4>
    当设置为true时，父元素之外的所有子元素将被裁剪/屏蔽
    </td>
</tr>
<tr>
    <td>zorder</td>
    <td>hotspot[name].zorder</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    热点元素的深度的排序。这个值可以是任何字符串或数字。所有带有zorder设置的热点元素将按给定值进行排序。当没有设置时，代码顺序是没有意义的，取决于浏览器的加载完成顺序。注意，这是重叠元素的一个重要设置。HTML5注意：zorder应该是0-100之间的值，没有负值。
    </td>
</tr>
<tr>
    <td>style</td>
    <td>hotspot[name].style</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    从一个或多个&lt;style&gt;加载属性。这样可以减少xml的代码，要使用多个style，请用|字符分割样式名称。注意：在样式中定义的属性不能覆盖在图层、插件、热点定义的属性。
    </td>
</tr>
<tr>
    <td>style</td>
    <td>hotspot[name].style</td>
    <td>String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    从一个或多个&lt;style&gt;加载属性。这样可以减少xml的代码，要使用多个style，请用|字符分割样式名称。注意：在样式中定义的属性不能覆盖在图层、插件、热点定义的属性。
    </td>
</tr>
<tr>
    <td>
    ath<br>
    atv
    </td>
    <td>
    hotspot[name].ath<br>
    hotspot[name].atv
    </td>
    <td>Number</td>
    <td>0.0</td>
</tr>
<tr>
    <td colspan=4>
    热点的球面坐标。在这里，热点图像将边缘设置点上对齐。
    </td>
</tr>
<tr>
    <td>edge</td>
    <td>hotspot[name].edge</td>
    <td>String</td>
    <td>“center”</td>
</tr>
<tr>
    <td colspan=4>
    热点元素的边缘/锚点。可能值：lefttop，left，leftbottom，top，center，bottom，righttop，right，rightbottom
    </td>
</tr>
<tr>
    <td>zoom</td>
    <td>hotspot[name].zoom</td>
    <td>Boolean</td>
    <td>false</td>
</tr>
<tr>
    <td colspan=4>
    当缩放时，热点图像的大小是否与pano一起变化。
    </td>
</tr>
<tr>
    <td>distorted</td>
    <td>hotspot[name].distorted</td>
    <td>Boolean</td>
    <td>false</td>
</tr>
<tr>
    <td colspan=4>
    在3D空间中，热点图像是否随当前pano/view一起扭曲。当扭曲设置为true后，使用rx，ry，rz来旋转三维空间的热点。注意：1，当启用时，将使用1000像素的大小作为像素的大小的参考。这1000像素覆盖了三维空间中90度的视场。2：扭曲热点不能也不应该有子元素，他们可能会不能正确显示。3：将Flash插件显示为失真的热点应该是可能的，但不能直接与他们交互。在这种情况下，插件不会直接显示，只有一种‘截图’的图像。
    </td>
</tr>
<tr>
    <td>rx/ry/rz</td>
    <td>hotspot[name].rx/hotspot[name].ry/hotspot[name].rz</td>
    <td>Number</td>
    <td>0.0/0.0/0.0</td>
</tr>
<tr>
    <td colspan=4>
    3维旋转的角度除以X/Y/Z轴。（轴顺序：Y-X-Z）。只能在distorted=true时使用。
    </td>
</tr>
<tr>
    <td>width/height</td>
    <td>hotspot[name].width/hotspot[name].height</td>
    <td>String/String</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    热点元素的目标大小-图像将按比例缩放这可以是绝对像素值，也可以是相对（屏幕宽度或屏幕高度）的百分比值。当未设置时，将使用加载图像的大小。此外，还可以使用特殊的值“prop”通过宽高来缩放图像（例如，将宽度或高度设置为一个值，另一个设置为prop。width=“500” height=“prop”）。注意：当使用扭曲热点时，大小与内部基准大小有关，其中1000像素覆盖了90度的视场。
    </td>
</tr>
<tr>
    <td>scale</td>
    <td>hotspot[name].scale</td>
    <td>Number</td>
    <td>1.0</td>
</tr>
<tr>
    <td colspan=4>
    热点元素的缩放
    </td>
</tr>
<tr>
    <td>rotate</td>
    <td>hotspot[name].scale</td>
    <td>Number</td>
    <td>1.0</td>
</tr>
<tr>
    <td colspan=4>
    热点的旋转角度。注意，distorted不能设置为true
    </td>
</tr>
<tr>
    <td>alpha</td>
    <td>hotspot[name].alpha</td>
    <td>Number</td>
    <td>1.0</td>
</tr>
<tr>
    <td colspan=4>
    热点的透明度。0.0-1.0之间。即使设置为0.0，元素依然存在并且可以点击，如果像隐藏它，可见属性必须设置为false。
    </td>
</tr>
<tr>
    <td>fillcolor/fillalpha</td>
    <td>hotspot[name].fillcolor/hotspot[name].fillalpha</td>
    <td>int/number</td>
    <td>0xAAAAAA/0.5</td>
</tr>
<tr>
    <td colspan=4>
    向多边形热点区域填充颜色和透明度
    </td>
</tr>
<tr>
    <td>borderwidth/bordercolor/borderalpha</td>
    <td>hotspot[name].borderwidth/hotspot[name].bordercolor/hotspot[name].borderalpha</td>
    <td>Number/int/Number</td>
    <td>3.0/0xAAAAAA/1.0</td>
</tr>
<tr>
    <td colspan=4>
    多边形热点的边框宽度，颜色，透明度
    </td>
</tr>
<tr>
    <td>onhover</td>
    <td>hotspot[name].onhover</td>
    <td>action event</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当鼠标移动到热点之上时触发该事件
    </td>
</tr>
<tr>
    <td>onout</td>
    <td>hotspot[name].onout</td>
    <td>action event</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当鼠标移出热点时触发该事件
    </td>
</tr>
<tr>
    <td>ondown</td>
    <td>hotspot[name].ondown</td>
    <td>action event</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当鼠标点击热点，并且在按下的时候，触发该事件
    </td>
</tr>
<tr>
    <td>onup</td>
    <td>hotspot[name].onup</td>
    <td>action event</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当鼠标点击热点，并且在抬起的时候，触发该事件
    </td>
</tr>
<tr>
    <td>onload</td>
    <td>hotspot[name].onload</td>
    <td>action event</td>
    <td></td>
</tr>
<tr>
    <td colspan=4>
    当加载热点图片完成时触发该事件。
    </td>
</tr>
</table>
</div>
        </div>
    </div>
</body>
<script>hljs.initHighlightingOnLoad();</script>
 <script src="/static/threeComponent/md/common.js"></script>

</html>